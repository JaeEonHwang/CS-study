# 대규모 트래픽으로 인한 서버 과부하 해결 방법
## 서버 과부하의 의미
* 서버 과부하: 리소스를 모두 소진하여 들어오는 요청을 처리하지 못할 때 발생
## 모니터링을 통한 자원 할당
* 자원이 한계점에 도달해서 서버 과부하가 알어나는 경우, **모이터링을 통한 자원의 적절한 할당**으로 해결 (CPU, 메모리, 대역폭 등)
* AWS 오토스케일링
	* 서비스 이용불가능 상태 발생 이전, cloud watch가 계속해서 모니터링하여 서버 대수를 늘려주는 방식
	* 애플리케이션을 자동으로 모니터링하고, 자원의 용량을 자동으로 조정
* 모니터링을 하는 이유
	1. 서버 중지에 대한 대처 가능(트래픽, 병목현상 등을 파악 가능)
	2. 각 페이지의 활용도를 파악하여 서비스 개선에 활용 가능
## 로드밸런서
* 트래픽을 분산
* 한 서버에서 장애가 발생하면, 트래픽을 다른 서버로 리디렉션하여 시스템 중단을 방지
## 블랙스완 프로토콜
* 블랙스완: 예측할 수 없는 사고
* 블랙스완이 일어났을 때의 규칙을 정해놓는 것이 좋음
## 서킷 브레이커
* 서비스 장애를 감지하고 연쇄적으로 생기는 에러를 방지하는 기법
* 서비스와 서비스 사이에 서킷브레이터 계층을 두고, 미리 설정해놓은 timeout 임계값에 도달하면, 서킷브레이커가 그 이후의 추가호출에 무조건 에러를 반환함
* 연속적인 에러 발생을 막아주며, 일부서비스가 종료되더라도 다른 서비스들은 이상없이 동작하게 만들수 있어 사용자 경험을 높여준다.
### 서킷 브레이커의 상태
1. closed: 정상, 네트워크 요청의 실패율이 임계치보다 낮음
2. open: 에러, 임계치 이상의 상태, 요청을 서비스로 전송하지 않고 바로 오류를 반환(fail fast)
3. half_open: 확인중, open 상태에서 일정 timeout으로 설정된 시간이 지나면 장애가 해결되었는지 확인하기 위해 half_open 상태로 전환. 요청을 전송하여 응답을 성공적으로 받으면 closed, 실패하면 open으로 다시 변경
## 콘텐츠 관리
1. 불필요한 콘텐츠 제거
2. CDN을 통한 콘텐츠 제거
3. 콘텐츠 캐싱
4. 콘텐츠 압축
5. 콘텐츠의 우하한 저하