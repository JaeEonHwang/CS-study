# 웹브라우저의 캐시
## 1. 로컬 스토리지
* 웹 스토리지 객채로 브라우저 내에 { key : value } 형태로 오리진에 종속되는 데이터
	* 하나의 키에 하나의 값만 저장
	* 데이터는 사용자가 브라우저에서 수동으로 삭제하지 않는 한 평생동안 로컬 저장소에 저장
	* 최대 용량 5MB
	* 사용자의 행위를 기억할 때, 로그인을 유지할 때 사용
	* 자동으로 서버에 전송되지 않음
## 2. 로컬 스토리지와 오리진
* origin: protocol(https:) + host(www.naver.com:443)
	* host: hostname(www.naver.com) + port(443)
## 3. 로컬 스토리지의 활용사례: 캐싱
## 4. 세션스토리지
* 로컬 스토리지와 다르게, 탭을 닫으면 데이터는 만료된다.
## 5. 쿠키
* 브라우저에 저장된 데이터 조각
* 서버에서 응답헤더를 Set-Cookie로 설정해서 쿠키를 보내면, 그 때부터 클라이언트에서 요청에서 Cookie에 설정되어 자동으로 서버에 전달되고 브라우저에도 저장
* 보통 서버에서 만료기한 설정 및 컨트롤을 함
* 최대 저장용량 4kb
* 로그인, 장바구니, 사용자 커스터마이징, 사용자 행동분석에 활용
* 클라이언트에서도 쿠키를 설정해서 보낼 수도 있지만, 권장되지 않음
	* 쿠키에는 민감한 정보들이 담길 수 있기 때문에, 제어권을 서버에 두게 하는 것이 좋다.
* 종류
	1. 세션 쿠키
		* Expires 또는 Max-Age 속성을 지정하지 않는 것
		* 브라우저가 종료되면 쿠키도 사라짐
	2. 영구 쿠키
		* Expires 또는 Max-Age 속성을 지정해서, 특정 날짜 또는 일정 기간이 지나야 삭제됨
* 설정 옵션
	1. secure: https로만 쿠키를 주고받게 하는 옵션
		* 일부 브라우저는 보안을 강화하고 안전하지 않은 사이트(HTTP)가 Secure 지시문으로 쿠키를 설정하는 것을 금지하기 위해 이 사양을 무시
	2. httponly: 공격자가 자바스크립트로 빼낼 수 없게 만듦. (document.cookie로 접근 불가)
	3. samesite: 동일한 도메인에서 시작된 요청에서만 쿠키가 애플리케이션으로 전송되도록 허용
* 쿠키의 시큐어코딩: 쿠키 - 세션으로 로그인을 처리한다면 다음과 같은 시큐어 코딩이 필요함
	1. 쿠키에 세션ID를 담을 때 이 세션ID기반으로 클라이언트 개인정보를 유추할 수 없게 해야 함
	2. 자바스크립트로는 파악할 수 없도록 http only 옵션을 걸어야 함
	3. 일정시간의 세션 타임아웃을 걸어야 함
* 쿠키허용관련 알림창
	* 서비스 운용시 쿠키를 사용한다면 쿠키허용관련 알림창을 만들어야함. 방문 기록을 추적할 때 쿠키가 사용. 이는 사용자의 데이터 간접수집에 해당하며 거기에 해당하는 KISA(한국인터넷진흥원) 지침을 준수해야 하기 때문
## 6. 로컬스토리지, 세션스토리지, 쿠키의 공통점과 차이점
* 공통점
	1. 브라우저에 캐싱을 함으로써 서버에 대한 요청을 줄여 서버부하를 방지할 수 있다.
	2. 캐싱으로 인해 다운로드하는 콘텐츠가 줄어들어, 웹사이트의 콘텐츠를 더 빨리 다운로드 가능하다.
	3. 사이트 기본 설정 커스터마이징을 저장하거나 로그인 상태를 유지할 때 사용할 수 있다.
* 차이점

||쿠키|로컬 스토리지|세션스토리지|
|---|---|---|---|
|최대저장용량|4KB|5MB|5MB|
|브라우저 허용|HTML4 + 5|HTML 5|HTML 5|
|접근 범위|창|창|탭|
|만료 기한|수동으로 설정|영구적|탭 닫으면 소멸|
|설정 주체|클라이언트 + 서버|클라이언트|클라이언트|
|서버 자동 전송 유무|O|X|X|

