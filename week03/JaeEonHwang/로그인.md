# 로그인
## 1. 세션기반인증방식: 개념
* 세션: 서버와 클라이언트의 연결이 활성화된 상태
* 세션ID: 웹 서버 또는 DB에 저장되는 클라이언트에 대한 유니크한 ID
* 세션기반 로그인 프로세스
	1. 최초 로그인 시에 세션ID 생성
	2. 서버에서 세션ID를 쿠키로 설정해서 클라이언트에 전달
	3. 클라이언트가 서버에 요청을 보낼 때 해당 세션ID를 쿠키로 담아서 전에 로그인했던 아이디인지 확인
	4. 로그인 유지
* 단점
	1. 세션ID를 서버에 저장했을 때: 로그인 중인 유저의 수가 늘어나면 서버 메모리 과부화가 일어날 수 있음
	2. DB 중 RDBMS에 저장할 경우: 직렬화 및 역직렬화에 대한 오버헤드가 발생
## 2. 세션기반인증방식: 실습
## 3. 토큰기반인증방식(access토큰, refresh토큰) 개념
* 토큰 자체에 모든 상태(state) 정보를 담은 뒤 토큰을 처리하는 서버를 따로 두고, 다른 콘텐츠를 제공하는 서버는 모두 stateless 하게 만듦.
* 프로세스
	1. 로그인 
	2. JWT토큰생성(access 토큰, refresh 토큰)
	3. HTTP 헤더에 access 토큰을 담아 인증이 필요한 서버에 요청해 원하는 콘텐츠를 가져옴
* JWT
	* JSON Web Token
	* 헤더, 페이로드, 서명으로 이루어져 있음
	* JSON 객체로 인코딩되며 메시지 인증, 암호화에 사용됨
		* 헤더: 토큰 유형과 서명 알고리즘 정보 포함, base64URI로 인코딩됨
		* 페이로드: 데이터/토큰 발급자/토큰 유효기간 정보 포함, base64URI로 인코딩됨
		* 서명: 헤더 + 페이로드 + 비밀키를 기반으로 헤더에 명시된 알고리즘으로 다시 생성한 서명값
* 장점
	1. 사용자 인증에 필요한 모든 정보를 토큰에 저장하기 때문에 별도의 인증 저장소가 필요없음
	2. 다른 유형의 토큰보다 경량화되어 있음
	3. 디코딩했을 때 JSON이 나오기 때문에 이를 기반으로 쉽게 직렬화, 역직렬화가 가능
* 단점
	1. 토큰이 비대해질 경우 서버과부화에 영향을 줌
	2. 토큰을 탈취당할 경우 디코딩을 하면 데이터를 볼 수 있음
## 4. 토큰기반인증방식(access토큰, refresh토큰) 실습
* 주의할 점
	* Bearer을 앞에 둬서 토큰기반인증방식이라는 것을 알려주어야 함
	* https를 사용해야함
	* 쿠키에 저장한다면 sameSite:Strict를 써야함
	* 수명이 짧은 access token을 발급해야함
	* url에 토큰을 전달하면 안 됨